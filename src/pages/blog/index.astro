---
import BaseLayout from "../../layouts/BaseLayout.astro";
import PostCard from "../../components/PostCard.astro";
import { getCollection } from "astro:content";

// Todos los posts (sin borradores), ordenados por fecha DESC (más reciente primero)
const posts = (await getCollection("blog"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

// Si usas paginación, aquí podrías recortar con .slice(0, 9)
---

<BaseLayout title="Blog">
  <main class="section">
    <div class="wrap">
      <h1 class="h2" style="font-size:2rem;margin-bottom:18px">Blog</h1>

      <!-- misma rejilla que en “Últimos artículos” -->
      <div class="grid grid--3" style="--stack-gap:16px">
        {posts.map((entry) => <PostCard entry={entry} />)}
        </div>
    </div>
  </main>
</BaseLayout>
