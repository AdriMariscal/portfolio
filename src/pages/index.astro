---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import PostCard from "../components/PostCard.astro";
import { getFeaturedProjects, getLatestPosts } from "../lib/content";

const projects = await getFeaturedProjects(2);
const posts = await getLatestPosts(2);
---
<BaseLayout title="AdriÃ¡n Mariscal Â· Portfolio">
  <!-- Hero -->
  <section class="stack" style="margin-top:2rem">
    <h1>Hola, soy AdriÃ¡n ðŸ‘‹</h1>
    <p class="muted">
      Desarrollador web. Construyo productos con Astro y creo contenido para ayudar a otros.
    </p>
    <p>
      <a href="/projects">Ver proyectos</a> Â· <a href="/blog">Leer el blog</a> Â·
      <a href="mailto:amariscalcantudo@gmail.com">Contacto</a>
    </p>
  </section>

  <!-- Proyectos destacados -->
  <section class="stack" style="margin-top:2.5rem">
    <h2>Proyectos destacados</h2>
    {projects.length === 0 ? (
      <p class="muted">AÃºn no hay proyectos destacados.</p>
    ) : (
      <div class="grid">
        {projects.map(p => (
          <ProjectCard entry={p} />
        ))}
      </div>
    )}
  </section>

  <!-- Ãšltimos posts -->
  <section class="stack" style="margin-top:2.5rem">
    <h2>Ãšltimos posts</h2>
    {posts.length === 0 ? (
      <p class="muted">AÃºn no hay publicaciones.</p>
    ) : (
      <div class="grid">
        {posts.map(p => (
          <PostCard entry={p} />
        ))}
      </div>
    )}
  </section>
</BaseLayout>
