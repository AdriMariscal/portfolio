---
// src/pages/index.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';
import PostCard from '../components/PostCard.astro';

// 游녢 a침ade countProjects a la importaci칩n
import { getFeaturedProjects, getRecentPosts, countProjects } from "../lib/content";

const [featured, projectsCount, recentPosts] = await Promise.all([
  getFeaturedProjects(),
  countProjects(),          // 游녣 ahora s칤 existe
  getRecentPosts(3),        // cambia 3 si quieres mostrar otro n췈 de posts
]);
---

<BaseLayout title="Adri치n Mariscal 췅 Portfolio">
  <!-- Hero -->
  <section class="hero section">
    <div class="wrap">
      <Hero projectsCount={projectsCount} />
    </div>
  </section>

<BaseLayout title="Adri치n Mariscal 췅 Portfolio">
  <!-- Hero -->
  <section class="stack" style="margin-top:2rem">
    <h1>Hola, soy Adri치n 游녦</h1>
    <p class="muted">
      Desarrollador web. Construyo productos con Astro y creo contenido para ayudar a otros.
    </p>
    <p>
      <a href="/projects">Ver proyectos</a> 췅 <a href="/blog">Leer el blog</a> 췅
      <a href="mailto:amariscalcantudo@gmail.com">Contacto</a>
    </p>
  </section>

  <!-- Proyectos destacados -->
  <section class="section">
    <div class="wrap">
      <h2 class="h2">Proyectos destacados</h2>
      <div class="stack" style="--stack-gap: 16px">
        {featured.map((entry) => <ProjectCard entry={entry} />)}
      </div>
    </div>
  </section>

  <!-- 칔ltimos art칤culos -->
  <section class="section">
    <div class="wrap">
      <h2 class="h2">칔ltimos art칤culos</h2>
      <div class="grid grid--3">
        {recentPosts.map((entry) => <PostCard entry={entry} />)}
      </div>
      <div class="posts-cta">
        <a class="btn btn--secondary" href="/blog">Ver todos los art칤culos</a>
      </div>
    </div>
  </section>

  <style>
    .posts-cta { margin-top: 18px; }
  </style>
</BaseLayout>
