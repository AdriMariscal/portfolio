---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';
import PostCard from '../components/PostCard.astro';
import { getFeaturedProjects, countProjects, getRecentPosts } from '../lib/content';

const featured = await getFeaturedProjects();
const projectsCount = await countProjects();
const recentPosts = await getRecentPosts(3); // cambia 3 si quieres otro nÂº
---

<BaseLayout title="Inicio Â· AdriÃ¡n Mariscal">
  <!-- Hero -->
  <section class="hero section">
    <div class="wrap">
      <Hero projectsCount={projectsCount} />
    </div>
  </section>

<BaseLayout title="AdriÃ¡n Mariscal Â· Portfolio">
  <!-- Hero -->
  <section class="stack" style="margin-top:2rem">
    <h1>Hola, soy AdriÃ¡n ðŸ‘‹</h1>
    <p class="muted">
      Desarrollador web. Construyo productos con Astro y creo contenido para ayudar a otros.
    </p>
    <p>
      <a href="/projects">Ver proyectos</a> Â· <a href="/blog">Leer el blog</a> Â·
      <a href="mailto:amariscalcantudo@gmail.com">Contacto</a>
    </p>
  </section>

  <!-- Proyectos destacados -->
  <section class="section">
    <div class="wrap">
      <h2 class="h2">Proyectos destacados</h2>
      <div class="stack" style="--stack-gap: 16px">
        {featured.map((entry) => <ProjectCard entry={entry} />)}
      </div>
    </div>
  </section>

  <!-- Ãšltimos artÃ­culos -->
  <section class="section">
    <div class="wrap">
      <h2 class="h2">Ãšltimos artÃ­culos</h2>
      <div class="grid grid--3">
        {recentPosts.map((p) => <PostCard entry={p} />)}
      </div>
      <div class="posts-cta">
        <a class="btn btn--secondary" href="/blog">Ver todos los artÃ­culos</a>
      </div>
    </div>
  </section>

  <style>
    .posts-cta{ margin-top: 18px; }
  </style>
</BaseLayout>
